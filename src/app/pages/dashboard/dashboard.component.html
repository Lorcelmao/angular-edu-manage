<div class="dashboard animate-fade-in">
  <div class="header-section animate-slide-up">
    <div class="header-content">
      <h1 class="page-title">Tổng quan hệ thống</h1>
    </div>
    <div class="header-decoration">
      <div class="decoration-circle decoration-1"></div>
      <div class="decoration-circle decoration-2"></div>
      <div class="decoration-circle decoration-3"></div>
    </div>
  </div>

  <!-- Statistics Cards -->
  <div class="stats-grid" [class.loading]="loading">
    <div class="stat-card schools-card animate-scale-in animate-stagger" (click)="navigateToSchools()">
      <div class="stat-icon">
        <i class="pi pi-building"></i>
      </div>
      <div class="stat-content">
        <div class="stat-number">{{ totalSchools }}</div>
        <div class="stat-label">Trường học</div>
      </div>
      <div class="stat-action">
        <i class="pi pi-arrow-right"></i>
      </div>
    </div>

    <div class="stat-card classes-card animate-scale-in animate-stagger" (click)="navigateToClasses()">
      <div class="stat-icon">
        <i class="pi pi-users"></i>
      </div>
      <div class="stat-content">
        <div class="stat-number">{{ totalClasses }}</div>
        <div class="stat-label">Lớp học</div>
      </div>
      <div class="stat-action">
        <i class="pi pi-arrow-right"></i>
      </div>
    </div>

    <div class="stat-card students-card animate-scale-in animate-stagger" (click)="navigateToStudents()">
      <div class="stat-icon">
        <i class="pi pi-user"></i>
      </div>
      <div class="stat-content">
        <div class="stat-number">{{ totalStudents }}</div>
        <div class="stat-label">Học sinh</div>
      </div>
      <div class="stat-action">
        <i class="pi pi-arrow-right"></i>
      </div>
    </div>

    <div class="stat-card average-card animate-scale-in animate-stagger">
      <div class="stat-icon">
        <i class="pi pi-chart-bar"></i>
      </div>
      <div class="stat-content">
        <div class="stat-number">{{ averageStudentsPerClass | number:'1.1-1' }}</div>
        <div class="stat-label">TB học sinh/lớp</div>
      </div>
    </div>
  </div>

  <!-- Charts Section -->
  <div class="charts-section animate-slide-up">
    <div class="chart-grid">
      <!-- School Classes Chart -->
      <div class="chart-container animate-scale-in">
        <div class="chart-card-custom">
          <div class="chart-header-custom">
            <div class="chart-icon-wrapper">
              <i class="pi pi-building"></i>
            </div>
            <div class="chart-title-content">
              <h3 class="chart-main-title">Top 5 trường có nhiều lớp nhất</h3>
              <p class="chart-subtitle">Thống kê số lượng lớp theo trường học</p>
            </div>
          </div>
          
          <div class="chart-wrapper">
            <p-chart type="bar" 
                     [data]="schoolChartData" 
                     [options]="chartOptions"
                     height="350px">
            </p-chart>
          </div>
        </div>
      </div>

      <!-- Grade Distribution Chart -->
      <div class="chart-container animate-scale-in">
        <div class="chart-card-custom">
          <div class="chart-header-custom">
            <div class="chart-icon-wrapper grade-icon">
              <i class="pi pi-chart-pie"></i>
            </div>
            <div class="chart-title-content">
              <h3 class="chart-main-title">Phân bố khối lớp</h3>
              <p class="chart-subtitle">Số lượng lớp và học sinh theo từng khối</p>
            </div>
          </div>
          
          <div class="chart-wrapper">
            <p-chart type="bar" 
                     [data]="gradeChartData" 
                     [options]="chartOptions"
                     height="350px">
            </p-chart>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Loading overlay -->
<div class="loading-overlay" *ngIf="loading">
  <div class="loading-content">
    <p-progressSpinner styleClass="custom-spinner"></p-progressSpinner>
    <p class="loading-text">Đang tải dữ liệu...</p>
  </div>
</div>